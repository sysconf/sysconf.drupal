#!/bin/bash
#
# Hook executed at the end of a git commit.
#
# This is provided by the gitted driver-git-remote as a symbolic link
# placed in REPO/.git/hook

called_as=$(readlink -f $0)
echo "\$0=$0 called_as=$called_as args=$@ PWD=$PWD"

commit=$(git rev-parse HEAD)
if git cat-file -p $commit | grep -q "^Gitted .* auto-commit "; then
    echo "$0: Not triggering gitted-commit, commit is an auto-commit already."
else
    echo Going...
    # gitted commit
fi
